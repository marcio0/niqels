{% load i18n %}

<form id="signin-form" method="POST" action="{% url "login" %}">{% csrf_token %}

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <h2>{% trans "Please sign in" %}</h2>

    {% for error in form.non_field_errors %}
        <div class="alert alert-error">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            {{error}}
        </div>
    {% endfor %}

    <div class="control-group {% if form.username.errors %}error{% endif %}">
        <div class="controls input-icon">
            <i class="icon-envelope input-icon-prepend"></i>
            <input
                type="text"
                name="username"
                id="username"
                class="input-block-level"
                placeholder="{% trans "Email" %}"
                value="{{ form.username.value|default_if_none:"" }}"
            >

            {% if form.username.errors %}
                <i
                    class="icon-exclamation icon-2x input-icon-append"
                    data-toggle="tooltip"
                    data-placement="right"
                    data-container="body"
                    
                    title="{{ form.username.errors | join:"\n"}}"
                    ></i>

            {% endif %}
        </div>
    </div>

    <div class="control-group {% if form.password.errors %}error{% endif %}">
        <div class="controls input-icon">
            <i class="icon-asterisk input-icon-prepend"></i>
            <input
                type="password"
                name="password"
                placeholder="{% trans "Password" %}"
                class="input-block-level"
            >

            {% if form.password.errors %}
                <i
                    class="icon-exclamation icon-2x input-icon-append"
                    data-toggle="tooltip"
                    data-placement="right"
                    data-container="body"
                    
                    title="{{ form.password.errors | join:"\n"}}"
                    ></i>

            {% endif %}
        </div>
    </div>

    <input type="submit" value="{% trans "Login" %}">

    <hr>

    <p><a href="{% url "password_reset_recover" %}">{% trans "Forgot your password?" %}</a></p>
    <p>{% trans "Not a user yet?" %} <a href="{% url "register" %}">{% trans "Sign up here!" %}</a></p>
</form>

<script type="text/javascript">
    $(function () {
        $('#signin-form .icon-exclamation').tooltip('show');
    });
</script>
